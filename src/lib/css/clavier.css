/*
==================================
======= Style très général =======
==================================
*/



bloc-clavier {
	--taille-clavier: 0.9; /* Pourcentage de la longueur de la page */
    --marge-clavier: calc(var(--marge-touche) * 5);
    --arrondi-clavier: calc(var(--marge-touche) * 3.5);
    
    --taille-touche: calc(var(--taille-clavier) * 100vw / 15);
    --hauteur-touche: calc(var(--taille-touche) - 2 * var(--marge-touche));
    --profondeur-touche: 1.5px;
    --profondeur-touche-pressee: 0.75px;
    --marge-touche: calc(var(--taille-clavier) * 0.36vw);
    --arrondi-touche: 0.15em;
    --ombre-touche: rgba(0, 0, 0, 0.3) 5px 3px 5px;
    --descente-touche: calc(var(--profondeur-touche) - var(--profondeur-touche-pressee));

    --couleur-touche-saturation: 90%;
    --couleur-touche-luminosite: 65%;
    --couleur-texte-touche: hsla(0, 100%, 100%, 90%);
	--transparence-touche: 25%;
	
	--transparence-touche-pressee: 8%;
    --couleur-touche-pressee-luminosite: 60%;

    --couleur-doigt-gauche-index: 0deg;
    --couleur-doigt-gauche-majeur: 25deg;
    --couleur-doigt-gauche-annulaire: 50deg;
    --couleur-doigt-gauche-auriculaire: 100deg;
    --couleur-doigt-droite-index: -40deg;
    --couleur-doigt-droite-majeur: -100deg;
    --couleur-doigt-droite-annulaire: -140deg;
    --couleur-doigt-droite-auriculaire: -170deg;

    display: block;
    width: max-content;
    margin: 0 auto;
    padding: var(--marge-clavier);
    background-color:hsla(234, 20%, 15%, 0.1);
    border: 1px solid hsla(0deg, 0%, 100%, 30%);
    border-radius: var(--arrondi-clavier);
	box-shadow: 0 0 10px 1px rgba(0, 126, 215, 0.8);
	font-weight: 300;
}

@media (max-width: 700px) {
	bloc-clavier {
		--taille-clavier: 0.9; /* Pourcentage de la longueur de la page */
	}
}



bloc-ligne {
    display: flex;
}



bloc-touche {
    --longueur-touche: calc(var(--taille-touche) * var(--taille) - 2 * var(--marge-touche));
    --effet-3d: hsla(var(--couleur-touche), var(--couleur-touche-saturation), calc(var(--couleur-touche-luminosite) - 20%), 70%);
    --ombres-touche: var(--ombre-touche), 0 var(--profondeur-touche) 0 var(--effet-3d);
    --couleur-fond-touche: hsla(var(--couleur-touche), var(--couleur-touche-saturation), var(--couleur-touche-luminosite), var(--transparence-touche));
    --couleur-bordure-touche: hsla(var(--couleur-touche), var(--couleur-touche-saturation), var(--couleur-touche-luminosite), 30%);
    --taille-bordure-touche: 1px; /* calc(var(--taille-clavier) * 0.1rem) */
    --taille-texte-touche: calc(var(--taille-touche) / 2.5);
    
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: var(--hauteur-touche);
    width: var(--longueur-touche);
    margin: var(--marge-touche);
    border: var(--taille-bordure-touche) solid var(--couleur-bordure-touche);
    border-radius: var(--arrondi-touche);
    background-color: var(--couleur-fond-touche);
    box-shadow: var(--ombres-touche);
    color: var(--couleur-texte-touche);
    cursor: pointer;
    font-size: var(--taille-texte-touche);
	font-weight: 300;
}

bloc-touche[data-touche=""] {
	display: none;
}

bloc-touche[data-touche="aucune"],
bloc-touche[data-touche="aucune"]:hover,
bloc-touche[data-touche="aucune"].active {
	background-color: transparent!important;
	border-color: transparent;
	box-shadow: none;
	cursor: auto;
}










/*
===============================
======= Version Ergodox =======
===============================
*/



ensemble-clavier[data-type="ergodox"] bloc-touche[data-colonne="6"] {
	margin-right: 50px;
}

ensemble-clavier[data-type="ergodox"] bloc-touche[data-touche="Space"],
ensemble-clavier[data-type="ergodox"] bloc-touche[data-doigt="pouce"]{
	/* background-color: rgb(10, 20, 40); */
	background-color: var(--couleur-fond-touche);
}

ensemble-clavier[data-type="ergodox"] bloc-ligne[data-ligne = '6'] {
	margin-top: 30px;
}









	
/*
=========================================
======= Style général des touches =======
=========================================
*/



bloc-touche:active,
bloc-touche:hover,
.touche-active {
	position: relative;
    top: var(--descente-touche);
    box-shadow: 0 var(--profondeur-touche-pressee) 0 var(--effet-3d), inset 0 0 1px #00000077;
	color: #333!important;
	background-color: rgba(255, 255, 255, 0.85)!important;
}



/* Touches spéciales */

bloc-touche[data-touche="LAlt"] div,
bloc-touche[data-touche="RAlt"] div,
bloc-touche[data-touche="LCtrl"] div,
bloc-touche[data-touche="RCtrl"] div,
bloc-touche[data-touche="Space"] div,
bloc-touche[data-touche="Win"] div,
bloc-touche[data-touche="Option"] div {
    font-size: calc(var(--taille-texte-touche) * 0.7);
	font-weight: normal;
}

bloc-touche[data-touche="RShift"] div,
bloc-touche[data-touche="LShift"] div {
	font-weight: bold;
}

bloc-touche[data-touche="AltTab"] div {
	font-size: calc(var(--taille-texte-touche) / 1.8);
	line-height: 1.15;
}



/* Affichage différent pour les touches mortes */

ensemble-clavier[data-couche="Visuel"] bloc-touche[data-touche="!"],
ensemble-clavier[data-couche="Primary"] bloc-touche[data-touche="!"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="à"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="b"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="d"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="a"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="i"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="e"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="u"]{
	--couleur-touche-luminosite: 65%;
	--couleur-touche-saturation: 0%;
}

/* Car les glyphes de certaines touches mortes s’affichent mal sinon */
ensemble-clavier[data-couche="Visuel"] bloc-touche[data-touche="!"],
ensemble-clavier[data-couche="Primary"] bloc-touche[data-touche="!"],
ensemble-clavier[data-couche="ShiftAltGr"] bloc-touche[data-touche="d"] {
	font-weight: normal;
}










/*
=============================
======= Couche Visuel =======
=============================
*/



ensemble-clavier[data-couche="Visuel"] bloc-touche[data-type="lettre"] div,
ensemble-clavier[data-couche="Visuel"] bloc-touche[data-type="français"] div {
	text-transform: uppercase;
}

ensemble-clavier[data-couche="Visuel"] bloc-touche[data-type="double"] div {
    line-height: 1.1;
    font-size: calc(var(--taille-texte-touche) * 0.7);
}

ensemble-clavier[data-couche="Visuel"][data-plus="oui"] bloc-touche[data-touche="q"] div,
ensemble-clavier[data-couche="Shift"][data-plus="oui"] bloc-touche[data-touche="q"] div {
	text-transform: capitalize;
	font-size: 0.9em;
}










/*
==================================
======= Style HyperTexte + =======
==================================
*/



/* Style de toutes les touches qui changent avec HyperTexte+ */
ensemble-clavier[data-plus="oui"] bloc-touche[data-plus="oui"],
ensemble-clavier[data-plus="oui"][data-type='ergodox'] bloc-touche[data-touche="Space"]{
	--couleur-touche: 270deg;
	--couleur-touche-saturation: 100%;
	--couleur-touche-luminosite: 80%;
	background: linear-gradient(to bottom, rgba(0, 234, 255, 0.15), rgba(102, 0, 255, 0.15));
	
}



/* Hold-tap */

ensemble-clavier[data-plus="oui"] bloc-touche[data-touche="LShift"],
ensemble-clavier[data-plus="oui"] bloc-touche[data-touche="LCtrl"],
ensemble-clavier[data-plus="oui"] bloc-touche[data-touche="LAlt"],
ensemble-clavier[data-plus="oui"] bloc-touche[data-touche="RAlt"] {
    line-height: 1.1;
    font-size: calc(var(--taille-texte-touche) * 0.7);
}

.tap {
	color: rgb(5, 121, 210);
}



/* Corrections localisées */

ensemble-clavier[data-couche="AltGr"][data-plus=oui] bloc-touche[data-touche="y"] div {
	font-size: 1.8em;
}

ensemble-clavier[data-couche="AltGr"][data-plus=oui] bloc-touche[data-touche="CapsLock"] div {
	font-size: 0.7em;
}

ensemble-clavier[data-couche="AltGr"][data-plus=oui] bloc-touche[data-touche="Tab"] div {
	font-size: 0.6em;
}



/* Couche Ctrl */
ensemble-clavier[data-couche="Ctrl"] bloc-touche[data-type="lettre"] div,
ensemble-clavier[data-couche="Ctrl"] bloc-touche[data-type="français"] div,
ensemble-clavier[data-couche="Ctrl"] bloc-touche[data-type="magique"] div {
	text-transform: uppercase;
}



/* Layer de navigation */
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="à"] div,
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="c"] div,
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="d"] div,
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="'"] div,
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="w"] div,
ensemble-clavier[data-couche="Layer"] bloc-touche[data-touche="x"] div {
	font-size: 0.8em;
}










/*
=============================
======= Touche Entrée =======
=============================
*/



ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]{ 
    top: 0;
    position: relative;
	z-index: 1;
	border-right: none;
}


ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"] div {
	font-weight: normal;
    z-index: 3;
}



/* On cache la jonction entre la touche et le bas de la touche créé par ::after, avec un rectangle par-dessus */
ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]::before {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 2;
    content: '';
    height: var(--taille-touche);
    width: calc(var(--taille-touche) - 2 * var(--marge-touche) - 1px);
    background-color: var(--couleur-fond-touche);
	border-radius: 0 calc(var(--arrondi-touche) - 1px) 0 0;
    border-right: var(--taille-bordure-touche) solid var(--couleur-bordure-touche);
}

/* On crée la partie en bas de la touche Entrée */
ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]::after {
    position: absolute;
    top: 100%;
    right: 0;
    z-index: 0;
	content: '';
    height: calc(var(--taille-touche) + var(--marge-touche) / 2);
    width: calc(var(--taille-touche) - 2 * var(--marge-touche));
    background-color: var(--couleur-fond-touche);
    border: var(--taille-bordure-touche) solid var(--couleur-bordure-touche);
    border-top: none;
    border-radius: 0 0 var(--arrondi-touche) var(--arrondi-touche);
    box-shadow: var(--ombre-touche), 0 var(--profondeur-touche) 0 var(--effet-3d), -0.5px var(--profondeur-touche) 0 var(--effet-3d);
}



/* Ce qui se passe quand on presse la touche Entrée */

ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:active,
ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:hover {
    position: relative;
    top: var(--descente-touche);
}

ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:active::before,
ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:hover::before {
    height: var(--taille-touche);
}

ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:active::after,
ensemble-clavier[data-type="iso"] bloc-touche[data-type="enter"]:hover::after {
    box-shadow: 0 var(--profondeur-touche-pressee) 0 var(--effet-3d), 0 var(--profondeur-touche-pressee) 0 var(--effet-3d);
}










/*
========================
======= Couleurs =======
========================
*/



/* Couleur des touches par doigt et main */

bloc-touche[data-main="gauche"][data-doigt="index"]{
    --couleur-touche: var(--couleur-doigt-gauche-index);
}

bloc-touche[data-main="gauche"][data-doigt="majeur"]{
    --couleur-touche: var(--couleur-doigt-gauche-majeur);
}

bloc-touche[data-main="gauche"][data-doigt="annulaire"]{
    --couleur-touche: var(--couleur-doigt-gauche-annulaire);
}

bloc-touche[data-main="gauche"][data-doigt="auriculaire"]{
    --couleur-touche: var(--couleur-doigt-gauche-auriculaire);
}

bloc-touche[data-main="droite"][data-doigt="index"]{
    --couleur-touche: var(--couleur-doigt-droite-index);
}

bloc-touche[data-main="droite"][data-doigt="majeur"]{
    --couleur-touche: var(--couleur-doigt-droite-majeur);
}

bloc-touche[data-main="droite"][data-doigt="annulaire"]{
    --couleur-touche: var(--couleur-doigt-droite-annulaire);
}

bloc-touche[data-main="droite"][data-doigt="auriculaire"]{
    --couleur-touche: var(--couleur-doigt-droite-auriculaire);
}

ensemble-clavier[data-type="iso"] bloc-touche[data-type="space"] {
	/* background-color: rgb(0, 10, 30); */
}





/* === Couleur des touches spéciales === */


bloc-touche[data-type="space"],
bloc-touche[data-type="special"],
bloc-touche[data-type="enter"] {
    background-color: rgb(7, 7, 7);
	color: white;
	/* Bordure de la touche en blanc transparent */
	--couleur-touche: 0deg; 
    --couleur-touche-saturation: 0%;
}


/* Pas de changement en hover sur les touches sur le bord du clavier SAUF celles activables */
bloc-touche[data-touche="Escape"]:not(.touche-active):hover,
bloc-touche[data-type="Escape"]:not(.touche-active):active,
bloc-touche[data-touche="Delete"]:not(.touche-active):hover,
bloc-touche[data-type="Delete"]:not(.touche-active):active,
bloc-touche[data-touche="BackSpace"]:not(.touche-active):hover,
bloc-touche[data-type="BackSpace"]:not(.touche-active):active,
bloc-touche[data-touche="Tab"]:not(.touche-active):hover,
bloc-touche[data-type="Tab"]:not(.touche-active):active,
bloc-touche[data-touche="CapsLock"]:not(.touche-active):hover,
bloc-touche[data-type="CapsLock"]:not(.touche-active):active,
bloc-touche[data-touche="Win"]:not(.touche-active):hover,
bloc-touche[data-type="Win"]:not(.touche-active):active,
bloc-touche[data-touche="LAlt"]:not(.touche-active):hover,
bloc-touche[data-type="LAlt"]:not(.touche-active):active,
bloc-touche[data-touche="Option"]:not(.touche-active):hover,
bloc-touche[data-type="Option"]:not(.touche-active):active,
bloc-touche[data-type="space"]:not(.touche-active):hover,
bloc-touche[data-type="space"]:not(.touche-active):active {
	/* background-color: rgb(7, 7, 7)!important;
	color: white!important; */
}

/* La bordure des touches des touches spéciales est en blanc pour mieux les mettre en relief */
ensemble-clavier[data-couleur="oui"] bloc-touche[data-type="special"],
ensemble-clavier[data-couleur="oui"] bloc-touche[data-type="space"],
ensemble-clavier[data-couleur="oui"] bloc-touche[data-type="enter"] {
	--couleur-bordure-touche: hsla(var(--couleur-touche), 100%, 100%, 35%);
}



/* Touche Enter */

bloc-touche[data-type="enter"]::before,
bloc-touche[data-type="enter"]::after,
bloc-touche[data-type="enter"]:active,
bloc-touche[data-type="enter"]:active::before,
bloc-touche[data-type="enter"]:active::after {
    background-color: rgb(7, 7, 7)!important;
	color: white!important;
}

bloc-touche[data-type="enter"]:hover,
bloc-touche[data-type="enter"]:hover div,
bloc-touche[data-type="enter"]:hover::before,
bloc-touche[data-type="enter"]:hover::after
{
	color: #333;
	background-color: rgb(230, 230, 230)!important;
	box-shadow: none;
}





/* === Si pas de couleur, ou couleur spéciale === */


ensemble-clavier[data-couleur="non"] bloc-touche,
ensemble-clavier[data-couleur="freq"] bloc-touche {
    --couleur-touche-saturation: 0%;
    --couleur-touche-luminosite: 100%;
}

ensemble-clavier[data-couleur="non"] bloc-touche {
	--transparence-touche: 15%;
}

ensemble-clavier[data-couleur="freq"] bloc-touche[data-type="lettre"] {
    --couleur-touche: calc(35deg * (0 - var(--frequence-log)) );
    --couleur-touche-saturation: 100%;
    --couleur-touche-luminosite: 80%;
	--transparence-touche: 40%;
	background-color: hsla( var(--couleur-touche), 100%, 80%, var(--transparence-touche));
}










/*
==================================================
======= Style par emplacements de claviers =======
==================================================
*/



#clavier-reference bloc-clavier {
	--taille-clavier: 0.75;
}

#clavier-presentation bloc-clavier {
	--taille-clavier: 0.5;
}

@media (max-width: 700px) {
	#clavier-reference bloc-clavier,
	#clavier-presentation bloc-clavier {
		--taille-clavier: 0.9;
	}
}